# ๐ ะะฐัััะพะนะบะฐ Netlify ะดะปั DeepL API

## ะัะพะฑะปะตะผะฐ CORS ัะตัะตะฝะฐ!

DeepL API ะฑะปะพะบะธััะตั ะฟััะผัะต ะทะฐะฟัะพัั ะธะท ะฑัะฐัะทะตัะฐ. ะะตัะตะฝะธะต: **Netlify Functions** (serverless ะฟัะพะบัะธ).

---

## โ ะงัะพ ัะถะต ัะดะตะปะฐะฝะพ ะฒ ะบะพะดะต:

1. **ะกะพะทะดะฐะฝะฐ Netlify Function**: `netlify/functions/translate-deepl.js`
2. **ะะฑะฝะพะฒะปะตะฝ DataService.js**: ะธัะฟะพะปัะทัะตั `/.netlify/functions/translate-deepl`
3. **ะะฑะฝะพะฒะปะตะฝ netlify.toml**: ะดะพะฑะฐะฒะปะตะฝะฐ ะบะพะฝัะธะณััะฐัะธั functions

---

## ๐ ะงัะพ ะฝัะถะฝะพ ัะดะตะปะฐัั ะขะะะ (ะพะดะธะฝ ัะฐะท):

### ะจะฐะณ 1: ะะพะฑะฐะฒะธัั ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั ะฒ Netlify

1. ะะฐะนะดะธ ะฝะฐ https://app.netlify.com
2. ะัะฑะตัะธ ัะฒะพะน ัะฐะนั **flashcards-seznam**
3. ะะตัะตะนะดะธ ะฒ **Site configuration** โ **Environment variables**
4. ะะฐะถะผะธ **Add a variable**
5. ะะพะฑะฐะฒั:
   ```
   Key: DEEPL_API_KEY
   Value: f65f9da4-018b-4ab4-adc8-d8f3de9cfb9f:fx
   ```
6. **Scopes**: ะฒัะฑะตัะธ **All scopes** (Production, Deploy previews, Branch deploys)
7. ะะฐะถะผะธ **Create variable**

### ะจะฐะณ 2: ะัั!

ะะพัะปะต ัะพะณะพ ะบะฐะบ ัั ะดะพะฑะฐะฒะธัั ะฟะตัะตะผะตะฝะฝัั ะธ ะทะฐะฟััะธัั ะบะพะด, Netlify ะฐะฒัะพะผะฐัะธัะตัะบะธ:
- ะะฐะดะตะฟะปะพะธั ะพะฑะฝะพะฒะปะตะฝะฝัะน ะบะพะด
- ะกะพะทะดะฐัั Netlify Function `translate-deepl`
- DeepL API ะฑัะดะตั ัะฐะฑะพัะฐัั ัะตัะตะท ะฟัะพะบัะธ (ะฑะตะท CORS ะพัะธะฑะพะบ)

---

## ๐ง ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั:

### ะกัะฐัะฐั ััะตะผะฐ (ะะ ัะฐะฑะพัะฐะปะฐ):
```
Browser โ DeepL API โ CORS Error
```

### ะะพะฒะฐั ััะตะผะฐ (ัะฐะฑะพัะฐะตั):
```
Browser โ Netlify Function โ DeepL API โ
          (ัะฒะพะน ะดะพะผะตะฝ)       (ะฟัะพะบัะธ)
```

### ะะตัะฐะปัะฝะพ:

1. **ะคัะพะฝัะตะฝะด** ะฒัะทัะฒะฐะตั: `fetch('/.netlify/functions/translate-deepl')`
2. **Netlify Function** ะฟะพะปััะฐะตั ะทะฐะฟัะพั
3. **Function** ะฒัะทัะฒะฐะตั DeepL API ั ัะฒะพะธะผ API ะบะปััะพะผ (ะธะท env)
4. **DeepL** ะฒะพะทะฒัะฐัะฐะตั ะฟะตัะตะฒะพะด
5. **Function** ะฒะพะทะฒัะฐัะฐะตั ัะตะทัะปััะฐั ััะพะฝัะตะฝะดั (ั CORS ะทะฐะณะพะปะพะฒะบะฐะผะธ)

---

## ๐งช ะัะพะฒะตัะบะฐ ะฟะพัะปะต ะดะตะฟะปะพั:

1. ะะตัะตะนะดะธ ะฝะฐ https://flashcards-seznam.netlify.app
2. ะัะบัะพะน DevTools (F12) โ Console
3. ะะฒะตะดะธ ัะตััะบะธะน ัะตะบัั: `"Ahoj, jak se mรกลก?"`
4. ะะฐะถะผะธ "ะะพะปััะธัั ะฟะตัะตะฒะพะดั"
5. **ะะถะธะดะฐะตััั**:
   ```
   [DeepL] Translating: "ahoj"
   [DeepL] โ Success: "ะฟัะธะฒะตั"
   ```
   **ะะะ CORS ะพัะธะฑะพะบ!**

---

## โ ะงัะพ ะตัะปะธ ะฝะต ัะฐะฑะพัะฐะตั?

### ะัะพะฒะตัั ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั:
1. Netlify Dashboard โ Site โ Environment variables
2. ะฃะฑะตะดะธัั ััะพ `DEEPL_API_KEY` ะดะพะฑะฐะฒะปะตะฝ
3. ะัะพะฒะตัั ััะพ ะทะฝะฐัะตะฝะธะต ะฟัะฐะฒะธะปัะฝะพะต: `f65f9da4-018b-4ab4-adc8-d8f3de9cfb9f:fx`

### ะัะพะฒะตัั ะดะตะฟะปะพะน:
1. Netlify Dashboard โ Deploys
2. ะะพัะปะตะดะฝะธะน ะดะตะฟะปะพะน ะดะพะปะถะตะฝ ะฑััั **Published**
3. ะ ะปะพะณะฐั ะดะพะปะถะฝะพ ะฑััั: `โ Functions bundled in XXX ms`

### ะัะพะฒะตัั Function ะฒ ะฑัะฐัะทะตัะต:
```javascript
// ะัะบัะพะน ะบะพะฝัะพะปั ะฝะฐ flashcards-seznam.netlify.app ะธ ะฒัะฟะพะปะฝะธ:
fetch('/.netlify/functions/translate-deepl', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ text: 'ahoj', source_lang: 'CS', target_lang: 'RU' })
})
.then(r => r.json())
.then(d => console.log(d))
```

ะะพะปะถะตะฝ ะฒะตัะฝััััั ะฟะตัะตะฒะพะด ะฑะตะท ะพัะธะฑะพะบ.

---

## ๐ฐ ะกัะพะธะผะพััั

**Netlify Functions**:
- โ **ะะตัะฟะปะฐัะฝะพ**: 125,000 ะทะฐะฟัะพัะพะฒ/ะผะตััั
- โ **ะขะฒะพั ะฝะฐะณััะทะบะฐ**: ~600 ะทะฐะฟัะพัะพะฒ/ะผะตััั (20 ะฟะตัะตะฒะพะดะพะฒ/ะดะตะฝั)
- โ **ะัะฒะพะด**: ะะพะปะฝะพัััั ะฑะตัะฟะปะฐัะฝะพ!

**DeepL API Free**:
- โ **ะะตัะฟะปะฐัะฝะพ**: 500,000 ัะธะผะฒะพะปะพะฒ/ะผะตััั
- โ **ะขะฒะพั ะฝะฐะณััะทะบะฐ**: ~60,000 ัะธะผะฒะพะปะพะฒ/ะผะตััั
- โ **ะัะฒะพะด**: ะะพะปะฝะพัััั ะฑะตัะฟะปะฐัะฝะพ!

**ะัะพะณะพ**: $0/ะผะตััั ๐

---

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           ะะพะปัะทะพะฒะฐัะตะปั ะฒะฒะพะดะธั ัะตะบัั          โ
โโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                   โผ
         โโโโโโโโโโโโโโโโโโโโโโโ
         โ   React Frontend    โ
         โ   (Netlify CDN)     โ
         โโโโโโโโโโโโฌโโโโโโโโโโโ
                    โผ
         โโโโโโโโโโโโโโโโโโโโโโโ
         โ   DataService.js    โ
         โ   ะัะพะฒะตัะบะฐ ะบััะฐ:    โ
         โ   1. Cache          โ
         โ   2. LocalStorage   โ
         โ   3. Firebase       โ
         โโโโโโโโโโโโฌโโโโโโโโโโโ
                    โผ
         โโโโโโโโโโโโโโโโโโโโโโโ
         โ /.netlify/functions/โ
         โ   translate-deepl   โ
         โ  (Serverless Proxy) โ
         โโโโโโโโโโโโฌโโโโโโโโโโโ
                    โผ
         โโโโโโโโโโโโโโโโโโโโโโโ
         โ    DeepL API        โ
         โ  api-free.deepl.com โ
         โโโโโโโโโโโโฌโโโโโโโโโโโ
                    โผ
              ะะตัะตะฒะพะด ะณะพัะพะฒ!
                    โผ
         ะกะพััะฐะฝะตะฝะธะต ะฒ Firebase
```

---

## ๐ ะะพัะพะฒะพ!

ะะพัะปะต ะดะพะฑะฐะฒะปะตะฝะธั ะฟะตัะตะผะตะฝะฝะพะน ะพะบััะถะตะฝะธั ะฒ Netlify ะธ ะดะตะฟะปะพั ะบะพะดะฐ - ะฒัั ะดะพะปะถะฝะพ ัะฐะฑะพัะฐัั!

**CORS ะพัะธะฑะพะบ ะฑะพะปััะต ะฝะต ะฑัะดะตั!** โจ
