/**
 * BaseDict.js
 * Базовый словарь с наиболее частыми чешскими словами для использования в качестве fallback
 * при недоступности других источников данных
 */

class BaseDict {
  constructor() {
    // Инициализируем словарь с наиболее частыми чешскими словами
    this.dictionary = this.initDictionary();
    this.wordSet = new Set(Object.keys(this.dictionary));
  }

  /**
   * Проверяет наличие слова в словаре
   * @param {string} word - Слово для проверки
   * @returns {boolean} - true, если слово есть в словаре
   */
  hasWord(word) {
    return this.wordSet.has(word.toLowerCase());
  }

  /**
   * Получает перевод слова из базового словаря
   * @param {string} word - Слово для перевода
   * @returns {Object|null} - Данные перевода или null
   */
  getTranslation(word) {
    const normalizedWord = word.toLowerCase();
    const translation = this.dictionary[normalizedWord];
    
    if (!translation) {
      return null;
    }
    
    return {
      word: normalizedWord,
      translations: Array.isArray(translation) ? translation : [translation],
      examples: [],
      source: 'baseDict'
    };
  }

  /**
   * Инициализирует словарь с наиболее частыми чешскими словами
   * @returns {Object} - Словарь в формате {слово: перевод}
   */
  initDictionary() {
    // Базовый словарь с наиболее частыми чешскими словами
    // Формат: чешское слово -> русский перевод (или массив переводов)
    return {
      // Местоимения
      'já': 'я',
      'ty': 'ты',
      'on': 'он',
      'ona': 'она',
      'ono': 'оно',
      'my': 'мы',
      'vy': 'вы',
      'oni': 'они',
      'ony': 'они',
      'se': 'себя',
      'svůj': 'свой',
      'kdo': 'кто',
      'co': 'что',
      'který': 'который',
      'jaký': 'какой',
      'ten': 'этот',
      'ta': 'эта',
      'to': 'это',
      'tento': 'этот',
      'tato': 'эта',
      'toto': 'это',
      'tamten': 'тот',
      'tamta': 'та',
      'tamto': 'то',
      
      // Глаголы
      'být': ['быть', 'существовать'],
      'mít': ['иметь', 'обладать'],
      'dělat': ['делать', 'выполнять'],
      'jít': ['идти', 'ходить'],
      'vidět': ['видеть', 'смотреть'],
      'slyšet': ['слышать'],
      'vědět': ['знать', 'ведать'],
      'říci': ['сказать', 'говорить'],
      'mluvit': ['говорить', 'разговаривать'],
      'psát': ['писать'],
      'číst': ['читать'],
      'pracovat': ['работать'],
      'hrát': ['играть'],
      'jíst': ['есть', 'кушать'],
      'pít': ['пить'],
      'spát': ['спать'],
      'myslet': ['думать', 'мыслить'],
      'chtít': ['хотеть', 'желать'],
      'moct': ['мочь', 'уметь'],
      'muset': ['должен', 'обязан'],
      'dát': ['дать', 'давать'],
      'vzít': ['взять', 'брать'],
      'najít': ['найти', 'находить'],
      'přijít': ['прийти', 'приходить'],
      'odejít': ['уйти', 'уходить'],
      
      // Существительные
      'člověk': ['человек'],
      'lidé': ['люди'],
      'muž': ['мужчина', 'муж'],
      'žena': ['женщина', 'жена'],
      'dítě': ['ребёнок', 'дитя'],
      'děti': ['дети'],
      'rodina': ['семья'],
      'přítel': ['друг', 'приятель'],
      'kamarád': ['друг', 'товарищ'],
      'dům': ['дом', 'здание'],
      'byt': ['квартира'],
      'škola': ['школа'],
      'práce': ['работа', 'труд'],
      'čas': ['время'],
      'den': ['день'],
      'rok': ['год'],
      'měsíc': ['месяц'],
      'týden': ['неделя'],
      'hodina': ['час'],
      'minuta': ['минута'],
      'voda': ['вода'],
      'jídlo': ['еда', 'пища'],
      'peníze': ['деньги'],
      'auto': ['автомобиль', 'машина'],
      'město': ['город'],
      'země': ['страна', 'земля'],
      'svět': ['мир', 'свет'],
      'život': ['жизнь'],
      'smrt': ['смерть'],
      'láska': ['любовь'],
      
      // Прилагательные
      'dobrý': ['хороший', 'добрый'],
      'špatný': ['плохой'],
      'velký': ['большой', 'великий'],
      'malý': ['маленький', 'малый'],
      'nový': ['новый'],
      'starý': ['старый'],
      'mladý': ['молодой'],
      'krásný': ['красивый', 'прекрасный'],
      'ošklivý': ['некрасивый', 'уродливый'],
      'vysoký': ['высокий'],
      'nízký': ['низкий'],
      'dlouhý': ['длинный', 'долгий'],
      'krátký': ['короткий', 'краткий'],
      'těžký': ['тяжёлый', 'трудный'],
      'lehký': ['лёгкий'],
      'černý': ['чёрный'],
      'bílý': ['белый'],
      'červený': ['красный'],
      'modrý': ['синий', 'голубой'],
      'zelený': ['зелёный'],
      'žlutý': ['жёлтый'],
      'teplý': ['тёплый'],
      'studený': ['холодный'],
      'mokrý': ['мокрый', 'влажный'],
      'suchý': ['сухой'],
      
      // Наречия
      'dobře': ['хорошо'],
      'špatně': ['плохо'],
      'rychle': ['быстро'],
      'pomalu': ['медленно'],
      'hodně': ['много'],
      'málo': ['мало'],
      'více': ['больше'],
      'méně': ['меньше'],
      'tam': ['там'],
      'tady': ['здесь', 'тут'],
      'dnes': ['сегодня'],
      'včera': ['вчера'],
      'zítra': ['завтра'],
      'teď': ['сейчас', 'теперь'],
      'vždy': ['всегда'],
      'nikdy': ['никогда'],
      'často': ['часто'],
      'zřídka': ['редко'],
      
      // Числительные
      'jeden': ['один'],
      'dva': ['два'],
      'tři': ['три'],
      'čtyři': ['четыре'],
      'pět': ['пять'],
      'šest': ['шесть'],
      'sedm': ['семь'],
      'osm': ['восемь'],
      'devět': ['девять'],
      'deset': ['десять'],
      'sto': ['сто'],
      'tisíc': ['тысяча'],
      'milion': ['миллион'],
      'první': ['первый'],
      'druhý': ['второй'],
      'třetí': ['третий'],
      
      // Предлоги
      'v': ['в'],
      'na': ['на'],
      'do': ['в', 'до'],
      'z': ['из', 'с'],
      's': ['с'],
      'k': ['к'],
      'od': ['от'],
      'u': ['у'],
      'o': ['о', 'об'],
      'pro': ['для'],
      'bez': ['без'],
      'podle': ['согласно', 'по'],
      'přes': ['через'],
      'mezi': ['между'],
      
      // Союзы
      'a': ['и'],
      'i': ['и', 'также'],
      'ale': ['но'],
      'nebo': ['или'],
      'že': ['что'],
      'když': ['когда'],
      'pokud': ['если'],
      'protože': ['потому что'],
      'aby': ['чтобы'],
      'jako': ['как'],
      'než': ['чем'],
      
      // Частицы и междометия
      'ano': ['да'],
      'ne': ['нет'],
      'možná': ['возможно', 'может быть'],
      'určitě': ['определённо', 'точно'],
      'bohužel': ['к сожалению'],
      'prosím': ['пожалуйста'],
      'děkuji': ['спасибо'],
      'ahoj': ['привет'],
      'nazdar': ['привет', 'здорово'],
      'dobrý den': ['добрый день'],
      'na shledanou': ['до свидания'],
      'sbohem': ['прощай']
    };
  }

  /**
   * Получает количество слов в словаре
   * @returns {number} - Количество слов
   */
  getWordCount() {
    return this.wordSet.size;
  }

  /**
   * Поиск слов в словаре по шаблону
   * @param {string} pattern - Шаблон для поиска
   * @returns {Array} - Найденные слова с переводами
   */
  searchWords(pattern) {
    if (!pattern || pattern.length < 2) {
      return [];
    }
    
    const normalizedPattern = pattern.toLowerCase();
    const results = [];
    
    for (const [word, translation] of Object.entries(this.dictionary)) {
      if (word.includes(normalizedPattern)) {
        results.push({
          word,
          translations: Array.isArray(translation) ? translation : [translation]
        });
      }
    }
    
    return results;
  }
}

// Экспортируем класс
export { BaseDict };
